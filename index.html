<!DOCTYPE html>
<html>
<head>
  <title>Instagram Follower Checker</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #eee; padding: 20px; }
    input, button { padding: 10px; margin-top: 10px; }
    ul { list-style: none; padding: 0; }
    li { margin: 5px 0; }
    .result { margin-top: 30px; }
  </style>
</head>
<body>
  <h1>Instagram Follower Checker</h1>
  <input type="text" id="session" placeholder="Paste your Instagram sessionid" style="width: 400px;" />
  <br />
  <button onclick="checkFollowers()">Check</button>
  <div id="output" class="result"></div>

  <script>
    async function checkFollowers() {
      const sessionid = document.getElementById('session').value.trim();
      const headers = {
        "cookie": `sessionid=${sessionid}`,
        "x-ig-app-id": "936619743392459", // Instagram web app ID
      };

      const me = await fetch("https://www.instagram.com/api/v1/accounts/current_user/", {
        headers
      }).then(res => res.json()).catch(() => null);

      if (!me || !me.user || !me.user.pk) {
        document.getElementById("output").innerHTML = "<b>Invalid session ID or Instagram blocked request.</b>";
        return;
      }

      const userId = me.user.pk;
      let followers = [], followings = [];

      async function getUsers(type) {
        const out = [];
        let next = null;
        do {
          const url = `https://www.instagram.com/api/v1/friendships/${userId}/${type}/?count=50&max_id=${next ?? ""}`;
          const res = await fetch(url, { headers }).then(r => r.json());
          out.push(...res.users.map(u => ({ username: u.username, full_name: u.full_name })));
          next = res.next_max_id;
        } while (next && out.length < 500); // limit to 500 for demo
        return out;
      }

      followers = await getUsers("followers");
      followings = await getUsers("following");

      const dontFollowMeBack = followings.filter(f => !followers.some(x => x.username === f.username));
      const iDontFollowBack = followers.filter(f => !followings.some(x => x.username === f.username));

      document.getElementById("output").innerHTML = `
        <h3>Don't Follow Me Back (${dontFollowMeBack.length})</h3>
        <ul>${dontFollowMeBack.map(u => `<li>@${u.username} (${u.full_name})</li>`).join("")}</ul>
        <h3>I Don't Follow Back (${iDontFollowBack.length})</h3>
        <ul>${iDontFollowBack.map(u => `<li>@${u.username} (${u.full_name})</li>`).join("")}</ul>
      `;
    }
  </script>
</body>
</html>
